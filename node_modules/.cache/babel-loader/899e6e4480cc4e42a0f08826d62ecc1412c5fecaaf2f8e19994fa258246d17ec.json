{"ast":null,"code":"export default {\n  data() {\n    return {\n      colors: [\"黑\", \"棕\", \"紅\", \"橙\", \"黃\", \"綠\", \"藍\", \"紫\", \"灰\", \"白\"],\n      score: 0,\n      roundTime: 30,\n      // 每回合時間（秒）\n      timer: null,\n      displayedWord: \"按下開始遊戲\",\n      colorCode: \"#000000\",\n      result: \"\",\n      recognition: null // 語音辨識物件\n    };\n  },\n  methods: {\n    startGame() {\n      this.score = 0;\n      this.result = \"\";\n      this.startRound();\n      this.timer = setTimeout(this.endGame, this.roundTime * 1000);\n    },\n    startRound() {\n      const word = this.colors[Math.floor(Math.random() * this.colors.length)];\n      let colorDisplayed;\n      do {\n        colorDisplayed = this.colors[Math.floor(Math.random() * this.colors.length)];\n      } while (colorDisplayed === word);\n      this.displayedWord = word;\n      this.colorCode = this.getColorCode(colorDisplayed);\n      this.startSpeechRecognition(colorDisplayed);\n    },\n    getColorCode(colorName) {\n      const colorMap = {\n        黑: \"#000000\",\n        棕: \"#A52A2A\",\n        紅: \"#FF0000\",\n        橙: \"#FFA500\",\n        黃: \"#FFFF00\",\n        綠: \"#008000\",\n        藍: \"#0000FF\",\n        紫: \"#800080\",\n        灰: \"#808080\",\n        白: \"#FFFFFF\"\n      };\n      return colorMap[colorName];\n    },\n    startSpeechRecognition(correctColor) {\n      // 初始化 SpeechRecognition\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      if (!SpeechRecognition) {\n        this.result = \"您的瀏覽器不支援語音辨識\";\n        return;\n      }\n      this.recognition = new SpeechRecognition();\n      this.recognition.lang = \"zh-TW\";\n      this.recognition.interimResults = false;\n\n      // 開始語音辨識\n      this.recognition.start();\n\n      // 處理辨識結果\n      this.recognition.onresult = event => {\n        const userAnswer = event.results[0][0].transcript;\n        if (userAnswer === correctColor) {\n          this.score++;\n          this.result = \"答對了！\";\n        } else {\n          this.result = `答錯了！正確答案是：${correctColor}`;\n        }\n        this.recognition.stop(); // 停止辨識，避免下一回合衝突\n        setTimeout(this.startRound, 1000); // 等待一秒再開始新回合\n      };\n\n      // 處理錯誤\n      this.recognition.onerror = event => {\n        this.result = \"語音辨識失敗，請再試一次\";\n        console.error(\"語音辨識錯誤:\", event.error);\n        this.recognition.stop();\n        setTimeout(this.startRound, 1000);\n      };\n    },\n    endGame() {\n      clearTimeout(this.timer);\n      this.result = `遊戲結束！總分數: ${this.score}`;\n      this.displayedWord = \"按下開始遊戲\";\n      if (this.recognition) {\n        this.recognition.stop(); // 結束遊戲時停止語音辨識\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","colors","score","roundTime","timer","displayedWord","colorCode","result","recognition","methods","startGame","startRound","setTimeout","endGame","word","Math","floor","random","length","colorDisplayed","getColorCode","startSpeechRecognition","colorName","colorMap","黑","棕","紅","橙","黃","綠","藍","紫","灰","白","correctColor","SpeechRecognition","window","webkitSpeechRecognition","lang","interimResults","start","onresult","event","userAnswer","results","transcript","stop","onerror","console","error","clearTimeout"],"sources":["/home/liang/Programs/colorgame/src/App.vue"],"sourcesContent":["<template>\n  <div class=\"color-game\">\n    <h1>顏色辨識遊戲</h1>\n    <p>當顯示顏色時，請用語音說出顯示的顏色名稱！</p>\n    <div id=\"color-display\" :style=\"{ color: colorCode }\">{{ displayedWord }}</div>\n    <button @click=\"startGame\">開始遊戲</button>\n    <div id=\"result\">{{ result }}</div>\n    <div id=\"score\">分數: {{ score }}</div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      colors: [\"黑\", \"棕\", \"紅\", \"橙\", \"黃\", \"綠\", \"藍\", \"紫\", \"灰\", \"白\"],\n      score: 0,\n      roundTime: 30, // 每回合時間（秒）\n      timer: null,\n      displayedWord: \"按下開始遊戲\",\n      colorCode: \"#000000\",\n      result: \"\",\n      recognition: null, // 語音辨識物件\n    };\n  },\n  methods: {\n    startGame() {\n      this.score = 0;\n      this.result = \"\";\n      this.startRound();\n      this.timer = setTimeout(this.endGame, this.roundTime * 1000);\n    },\n    startRound() {\n      const word = this.colors[Math.floor(Math.random() * this.colors.length)];\n      let colorDisplayed;\n      do {\n        colorDisplayed = this.colors[Math.floor(Math.random() * this.colors.length)];\n      } while (colorDisplayed === word);\n\n      this.displayedWord = word;\n      this.colorCode = this.getColorCode(colorDisplayed);\n      this.startSpeechRecognition(colorDisplayed);\n    },\n    getColorCode(colorName) {\n      const colorMap = {\n        黑: \"#000000\",\n        棕: \"#A52A2A\",\n        紅: \"#FF0000\",\n        橙: \"#FFA500\",\n        黃: \"#FFFF00\",\n        綠: \"#008000\",\n        藍: \"#0000FF\",\n        紫: \"#800080\",\n        灰: \"#808080\",\n        白: \"#FFFFFF\",\n      };\n      return colorMap[colorName];\n    },\n    startSpeechRecognition(correctColor) {\n      // 初始化 SpeechRecognition\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      if (!SpeechRecognition) {\n        this.result = \"您的瀏覽器不支援語音辨識\";\n        return;\n      }\n\n      this.recognition = new SpeechRecognition();\n      this.recognition.lang = \"zh-TW\";\n      this.recognition.interimResults = false;\n\n      // 開始語音辨識\n      this.recognition.start();\n\n      // 處理辨識結果\n      this.recognition.onresult = (event) => {\n        const userAnswer = event.results[0][0].transcript;\n        if (userAnswer === correctColor) {\n          this.score++;\n          this.result = \"答對了！\";\n        } else {\n          this.result = `答錯了！正確答案是：${correctColor}`;\n        }\n        this.recognition.stop(); // 停止辨識，避免下一回合衝突\n        setTimeout(this.startRound, 1000); // 等待一秒再開始新回合\n      };\n\n      // 處理錯誤\n      this.recognition.onerror = (event) => {\n        this.result = \"語音辨識失敗，請再試一次\";\n        console.error(\"語音辨識錯誤:\", event.error);\n        this.recognition.stop();\n        setTimeout(this.startRound, 1000);\n      };\n    },\n    endGame() {\n      clearTimeout(this.timer);\n      this.result = `遊戲結束！總分數: ${this.score}`;\n      this.displayedWord = \"按下開始遊戲\";\n      if (this.recognition) {\n        this.recognition.stop(); // 結束遊戲時停止語音辨識\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.color-game {\n  text-align: center;\n  font-family: Arial, sans-serif;\n}\n#color-display {\n  font-size: 3em;\n  margin-top: 50px;\n}\n#result, #score {\n  margin-top: 20px;\n  font-size: 1.5em;\n}\nbutton {\n  margin-top: 20px;\n  padding: 10px 20px;\n  font-size: 1em;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}